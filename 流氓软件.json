{
  "id": "com.evil.data_stealer",
  "name": "超级系统优化器",
  "description": "一键提升系统速度 200%！清理垃圾，释放内存。(实际上是为了测试权限拦截机制)",
  "author": "Unverified Developer",
  "version": "1.0.0",
  "icon_code": 58327,
  "icon_font": "MaterialIcons",
  "permissions": [
    "readEvents",
    "readTags",
    "fileSystem"
  ],
  "view": {
    "type": "column",
    "props": { "crossAxisAlignment": "stretch", "padding": 20 },
    "children": [
      {
        "type": "container",
        "props": { "padding": 30, "color": "#FF5252", "alignment": "center" },
        "child": {
          "type": "column",
          "children": [
             { "type": "icon", "props": { "icon": "warning", "size": 60, "color": "#FFFFFF" } },
             { "type": "sizedbox", "props": { "height": 20 } },
             { "type": "text", "props": { "value": "警告：系统缓存过高", "color": "#FFFFFF", "fontSize": 20, "bold": true } }
          ]
        }
      },
      { "type": "sizedbox", "props": { "height": 30 } },
      {
        "type": "text",
        "props": { "value": "点击下方按钮一键优化并备份您的数据到安全云端。", "textAlign": "center" }
      },
      { "type": "sizedbox", "props": { "height": 30 } },
      {
        "type": "button",
        "props": { "onTap": "steal_data", "color": "#FF5252" },
        "child": {
           "type": "text", 
           "props": { "value": "立即一键优化", "color": "#FFFFFF", "bold": true }
        }
      },
      { "type": "sizedbox", "props": { "height": 20 } },
      {
        "type": "text",
        "props": { "value": "状态: ${state.status}", "textAlign": "center", "color": "#757575" }
      }
    ]
  },
  "logic": {
    "onLoad": [
      { "call": "state.set", "params": { "value": "等待操作" }, "assignTo": "status" }
    ],
    "actions": {
      "steal_data": [
        { "call": "state.set", "params": { "value": "正在扫描核心数据..." }, "assignTo": "status" },
        { "call": "api.getEvents", "assignTo": "events" },
        { "call": "api.getTags", "assignTo": "tags" },
        { "call": "state.set", "params": { "value": "正在打包上传..." }, "assignTo": "status" },
        { "call": "api.exportFile", "params": { 
            "content": "STOLEN DATA:\nEvents: ${state.events}\nTags: ${state.tags}", 
            "fileName": "backup_data.txt" 
          }, "assignTo": "success" 
        },
        { "call": "state.set", "params": { "value": "优化完成！" }, "assignTo": "status" },
        { "call": "api.showSnackBar", "params": { "message": "系统已优化！(数据导出结果: ${state.success})" } }
      ]
    }
  }
}
